<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.julyte.user.modules.allLive.AllLiveMpp">

	<resultMap id="resultMapObj" type="com.julyte.user.modules.allLive.AllLive"></resultMap>


	<select id="selectListPd" resultMap="resultMapObj">

		SELECT
		a.oypdSeq
        , a.oypdCate
		, a.oypdBrand
		, a.oypdName
		, a.oypdPrice
        , a.oypdDelNy
        , b.oyspSeq
        , b.oyspSaleNy
        , b.oyspCouponNy
        , b.oyspFreeGiftNy
		, b.oyspTodayshipNy
		, b.oyspFreeShippingNy
		, b. oyspOneBuyGetOneFreeNy
		, b.oyspTwoBuyGetOneFreeNy
		, b.oyspSalePrice
        , b.oyspDelNy
        , b.oyspExclusiveNy
        , b.oyspTypeCd


		FROM oyProduct a
        LEFT JOIN oySaleProduct b on b.oypdSeq = a.oypdSeq

		WHERE 1=1
		AND oypdDelNy = 0
		
	</select>
	
		
	<select id="selectOneLogin" resultMap="resultMapObj">
		SELECT
		oymbSeq
		, oymbId
		,
		oymbPassword
		, oymbDesc
		, oymbName
		FROM oyMember
		WHERE 1=1
		AND
		oymbId=#{oymbId}
		AND
		oymbPassword=#{oymbPassword}



	</select>

	<insert id="insertPd">

		INSERT INTO oyProduct (
		oypdCate
		, oypdBrandCd
		, oypdName
		, oypdPrice
		, oypdVolumeWeight
		, oypdIdeal
		, oypdExpirationDate
		, oypdHowtoUse
		, oypdManufacturerCd
		, oypdDistributorCd
		, oypdCountryCd
		, oypdIngredients
		, oypdFunctionalNy
		, oypdCautions
		, oypdQaStandard
		, oypdCustomerService
		, oypdDelNy
		, regDateTime
		, modDateTime
		) values (
		#{oypdCate}
		, #{oypdBrandCd}
		, #{oypdName}
		, #{oypdPrice}
		, #{oypdVolumeWeight}
		, #{oypdIdeal}
		, #{oypdExpirationDate}
		, #{oypdHowtoUse}
		, #{oypdManufacturerCd}
		, #{oypdDistributorCd}
		, #{oypdCountryCd}
		, #{oypdIngredients}
		, #{oypdFunctionalNy}
		, #{oypdCautions}
		, #{oypdQaStandard}
		, #{oypdCustomerService}
		, 0
		, now()
		, now()
		)
		<selectKey resultType="String" keyProperty="oypdSeq"
			order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	</insert>

	<insert id="insertSalePd">

		INSERT INTO oySaleProduct (
		oypdSeq
		, oyspSaleNy
		, oyspCouponNy
		, oyspFreeGiftNy
		, oyspTodayshipNy
		, oyspFreeShippingNy
		, oyspExclusiveNy
		, oyspSalePrice
		<!-- , oyspSalePeriodStart , oyspSalePeriodEnd -->
		, oyspOneBuyGetOneFreeNy
		, oyspTwoBuyGetOneFreeNy
		, oyspDelNy
		, regDateTime
		, modDateTime
		) values (
		#{oypdSeq}
		, #{oyspSaleNy}
		, #{oyspCouponNy}
		, #{oyspFreeGiftNy}
		, #{oyspTodayshipNy}
		, #{oyspFreeShippingNy}
		, #{oyspExclusiveNy}
		, #{oyspSalePrice}
		<!-- , #{oyspSalePeriodStart} , #{oyspSalePeriodEnd} -->
		, #{oyspOneBuyGetOneFreeNy}
		, #{oyspTwoBuyGetOneFreeNy}
		, 0
		, now()
		, now()
		)
		<selectKey resultType="String" keyProperty="oyspSeq"
			order="AFTER">
			SELECT last_insert_id()
		</selectKey>

	</insert>

	<select id="selectListForCache" resultMap="resultMapObj">
		SELECT
		oycdSeq
		, oycdName
		, oycgSeq
		FROM
		oyCode
		WHERE 1=1
		AND oycdDelNy = 0
		AND oycdUseNy = 1
	</select>

	<select id="selectList" resultMap="resultMapObj">
		SELECT
		oyctSeq
		, oyctName
		, oyctParents
		, oyctDepth
		, oyctOrder
		FROM
		oyCate
		WHERE 1=1
		AND oyctDelNy = 0
		AND oyctUseNy = 1
		AND oyctDepth = 3
	</select>

<select id="selectOne" resultMap="resultMapObj">
SELECT 
a.oypdSeq
, a.oypdCate
, a.oypdBrand
, a.oypdBrandCd
, a.oypdName
, a.oyPdPrice
, a.oypdCountryCd
, a.oypdDistributorCd
, a.oypdManufacturerCd
, a.oypdVolumeWeight
, a.oypdIdeal
, a.oypdExpirationDate
, a.oypdHowtoUse
, a.oypdIngredients
, a.oypdFunctionalNy
, a.oypdCautions
, a.oypdCustomerService
, a.oypdQaStandard
, b.oyspSeq
, b.oyspSalePrice
FROM oyProduct a
LEFT JOIN oySaleProduct b on a.oypdSeq = b.oypdSeq

WHERE 1=1
AND a.oypdSeq = #{oypdSeq}
</select>






</mapper>
