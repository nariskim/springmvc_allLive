<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.julyte.user.modules.allLive.AllLiveMpp">

	<resultMap id="resultMapObj"
		type="com.julyte.user.modules.allLive.AllLive"></resultMap>


<select id="selectListPd" resultMap="resultMapObj">
		SELECT
		a.oypdSeq
		, a.oypdCate
		, a.oypdBrand
		, a.oypdName
		, a.oypdPrice
		, a.oypdDelNy
		, b.oyspSeq
		, b.oyspSalePrice
		, b.oyspDelNy
		, b.oyspTypeCd

		FROM oyProduct a
		LEFT JOIN
		oySaleProduct b on b.oypdSeq = a.oypdSeq
		WHERE 1=1
		AND oypdDelNy = 0

	</select>


	<select id="selectOneLogin" resultMap="resultMapObj">
		SELECT
		oymbSeq
		, oymbId
		, oymbPassword
		, oymbDesc
		, oymbName
		FROM oyMember
		WHERE 1=1
		AND oymbId=#{oymbId}
		AND oymbPassword=#{oymbPassword}



	</select>

	<insert id="insertPd">

		INSERT INTO oyProduct (
		oypdCate
		, oypdBrandCd
		, oypdName
		, oypdPrice
		, oypdVolumeWeight
		, oypdIdeal
		, oypdExpirationDate
		, oypdHowtoUse
		, oypdManufacturerCd
		, oypdDistributorCd
		, oypdCountryCd
		, oypdIngredients
		, oypdFunctionalNy
		, oypdCautions
		, oypdQaStandard
		, oypdCustomerService
		, originalFilePd
		, uuidFilePd
		, oypdDelNy
		, regDateTime
		, modDateTime
		) values (
		#{oypdCate}
		, #{oypdBrandCd}
		, #{oypdName}
		, #{oypdPrice}
		, #{oypdVolumeWeight}
		, #{oypdIdeal}
		, #{oypdExpirationDate}
		, #{oypdHowtoUse}
		, #{oypdManufacturerCd}
		, #{oypdDistributorCd}
		, #{oypdCountryCd}
		, #{oypdIngredients}
		, #{oypdFunctionalNy}
		, #{oypdCautions}
		, #{oypdQaStandard}
		, #{oypdCustomerService}
		, #{originalFilePd}
		, #{uuidFilePd}
		, 0
		, now()
		, now()
		)
		
		<selectKey resultType="String" keyProperty="oypdSeq"
			order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	
	</insert>

	<insert id="insertSalePd">

		INSERT INTO oySaleProduct (
		oyspSaleNy
		, oyspExclusiveNy
		, oyspSalePrice
		, oypdSeq
		<!-- , oyspSalePeriodStart , oyspSalePeriodEnd -->
		, oyspDelNy
		, regDateTime
		, modDateTime
		) values (
		#{oyspSaleNy}
		, #{oyspExclusiveNy}
		, #{oyspSalePrice}
		, #{oypdSeq}
		<!-- , #{oyspSalePeriodStart} , #{oyspSalePeriodEnd} -->
		, 0
		, now()
		, now()
		)
		<selectKey resultType="String" keyProperty="oyspSeq"
			order="AFTER">
			SELECT last_insert_id()
		</selectKey>

	</insert>






	<select id="selectOne" resultMap="resultMapObj">



		SELECT
		a.oypdSeq
		, a.oypdCate
		, a.oypdBrand
		, a.oypdName
		, a.oypdPrice
		, a.originalFilePd
		, a.uuidFilePd
		, a.oypdDelNy
		, b.oyspSeq
		, b.oyspSalePrice
		, b.oyspDelNy
		, b.oyspTypeCd
		
		FROM oyProduct a
		LEFT JOIN oySaleProduct b on b.oypdSeq = a.oypdSeq
		WHERE 1=1
		AND oypdDelNy = 0
		AND a.oypdSeq = #{oypdSeq}
	</select>

	<update id="updatePd">

		UPDATE
		oyProduct
		SET
		oypdCate = #{oypdCate}
		, oypdBrandCd = #{oypdBrandCd}
		, oypdName = #{oypdName}
		, oypdPrice = #{oypdPrice}
		, oypdCountryCd = #{oypdCountryCd}
		, oypdDistributorCd = #{oypdDistributorCd}
		, oypdManufacturerCd = #{oypdManufacturerCd}
		, oypdVolumeWeight = #{oypdVolumeWeight}
		, oypdIdeal = #{oypdIdeal}
		, oypdExpirationDate = #{oypdExpirationDate}
		, oypdHowtoUse = #{oypdHowtoUse}
		, oypdIngredients = #{oypdIngredients}
		, oypdFunctionalNy = #{oypdFunctionalNy}
		, oypdCautions = #{oypdCautions}
		, oypdCustomerService = #{oypdCustomerService}
		, oypdQaStandard = #{oypdQaStandard}
		, oypdDistributorCd = #{oypdDistributorCd}

		WHERE 1=1
		AND oypdSeq = #{oypdSeq}


	</update>

	<update id="updateSalePd">

		UPDATE
		oySaleProduct
		SET
		oyspSaleNy = #{oyspSaleNy}
		, oyspSalePrice = #{oyspSalePrice}

		WHERE 1=1
		AND oypdSeq = #{oypdSeq}


	</update>
	
	<select id="selectListCate" resultMap="resultMapObj">
		SELECT
		oyctSeq
		, oyctName
		, oyctParents
		, oyctDepth
		, oyctOrder
		, oyctDelNy
		FROM
		oyCate
		WHERE 1=1
		AND oyctDelNy = 0
	</select>

</mapper>
